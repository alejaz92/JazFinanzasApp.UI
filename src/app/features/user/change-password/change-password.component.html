<div class="container">
    <h1 class="mt-3">
        Cambiar Contraseña
    </h1>
    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
        <div class="mt-2">
            <div class="form-group mt-3">
                <label for="currentPassword" class="form-label">Contraseña Actual</label>
                <input type="password" 
                    class="form-control"
                    id="currentPassword"
                    formControlName="currentPassword"
                    [ngClass]="{ 'is-invalid': submitted && f['currentPassword'].errors }"
                >
                <div  *ngIf="submitted && f['currentPassword'].errors" class="invalid-feedback">
                    <div *ngIf="f['currentPassword'].errors['required']">La contraseña actual es requerida</div>
                </div>
            </div>
            <div class="form-group mt-3">
                <label for="newPassword" class="form-label">Nueva Contraseña</label>
                <input type="password" 
                    class="form-control"
                    id="newPassword"
                    formControlName="newPassword"
                    [ngClass]="{ 'is-invalid': submitted && f['newPassword'].errors }"
                >
                <div  *ngIf="submitted && f['newPassword'].errors" class="invalid-feedback">
                    <div *ngIf="f['newPassword'].errors['required']">La nueva contraseña es requerida</div>
                    <div *ngIf="f['newPassword'].errors['minlength']">La nueva contraseña debe tener al menos 6 caracteres</div>
                </div>
            </div>
            <div class="form-group mt-3">
                <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
                <input type="password" 
                    class="form-control"
                    id="confirmPassword"
                    formControlName="confirmPassword"
                    [ngClass]="{ 'is-invalid': submitted && f['confirmPassword'].errors }"
                >
                <div  *ngIf="submitted && f['confirmPassword'].errors" class="invalid-feedback">
                    <div *ngIf="f['confirmPassword'].errors['required']">La confirmación de la contraseña es requerida</div>
                    <div *ngIf="f['confirmPassword'].errors['mustMatch']">Las contraseñas no coinciden</div>
                </div>
            </div>

            <div class="form-group mt-3">
                <button type="submit" class="btn btn-primary m-1">Guardar</button>
                    <a class="btn btn-secondary" [routerLink]="['']">Cancelar</a> 
            </div>

            <div *ngIf="successMessage" class="alert alert-success mt-3">{{ successMessage }}</div>
            <div *ngIf="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>
        </div>
    </form>
</div>